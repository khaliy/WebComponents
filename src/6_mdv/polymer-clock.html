<link rel="import" href="../bower_components/polymer/polymer.html">

<script src="../clock.js" type="text/javascript"></script>

<polymer-element name="x-clock" attributes="play value" on-click="{{playOrStop}}">
    <template>
    <style>
        :host :empty,
        :host :empty + .sep {
            visibility: hidden;
        }
        .clock {
            border: 1px solid green;
            cursor: pointer;
            display: inline-block;
            padding: 5px;
        }
    </style>
    <div class="clock">
        <span class="hours"></span>
        <span class="sep">:</span>
        <span class="minutes"></span>
        <span class="sep">.</span>
        <span class="seconds"></span>
    </div>
    </template>
    <script>
        var Clock = window['ClockModule'].Clock;
        Polymer('x-clock', {
            ready: function() {
                this.clock = new Clock(this.shadowRoot);

                if (this.play) {
                    this.clock.play();
                }

                this.clock.changed(function () {
                    this.value = this.clock.value;
                }.bind(this));

                this.value = this.clock.value;
            },
            play: false,
            playChanged: function(oldVal, newVal) {
                this.clock[this.play?'play':'stop']();
            },
            detached: function () {
                this.stop();
            },
            stop: function () {
                this.play = false;
            },
            playOrStop: function () {
                this.play = !this.play;
            }
        });
    </script>
</polymer-element>

